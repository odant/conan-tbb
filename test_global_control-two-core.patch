--- a/src/test/tbb/test_global_control.cpp
+++ b/src/test/tbb/test_global_control.cpp
@@ -29,6 +29,7 @@
 #include "tbb/task_arena.h"
 
 #include <cstring>
+#include <algorithm>
 
 struct task_scheduler_handle_guard {
     tbb::task_scheduler_handle m_handle{};
@@ -170,7 +171,7 @@ namespace TestBlockingTerminateNS {
             }
         };
         void operator()() {
-            const int numThreads = 4;
+            const int numThreads = (std::min)(4, tbb::tbb_thread::hardware_concurrency());
             tbb::global_control init(tbb::global_control::max_allowed_parallelism, numThreads);
             tbb::task_arena a(numThreads);
             a.execute([&] {